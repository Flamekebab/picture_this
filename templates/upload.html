{% extends 'base.html' %}

{% block body %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-6">
            {% if user %}

            <h1>Add a photo</h1>
            <form action="/api/upload" method="POST" enctype=multipart/form-data>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="file-or-url" id="flexRadioDefault1" value="url">
                  <label class="form-check-label" for="flexRadioDefault1">
                    Upload from a URL
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="file-or-url" id="flexRadioDefault2" value="file" checked>
                  <label class="form-check-label" for="flexRadioDefault2">
                    Upload a file
                  </label>
                </div>
                <div class="form-group" id="url-input">
                    <label for="url-input">URL:</label>
                    <input class="form-control" type="text" name="url">
                </div>
                <div class="form-group" id="file-input">
                  <label for="attach-file" class="form-label">Upload a file</label>
                  <input class="form-control" type="file" name="attached-file" id="attach-file" accept=".webp,.png,.jpg,.jpeg,.gif,image/*">
                </div>
                <div class="form-group">
                    <label>Notes:</label>
                    <input class="form-control" type="text" name="notes">
                </div>

                <!-- <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="private" name="private" value="yes">
                    <label class="form-check-label" for="exampleCheck1">Mark this image as Private</label>
                </div> -->

                {% if user['boards'] %}

                <div class="form-group">
                    <select class="custom-select" name="board_id" required>
                        <option value="" selected disabled>Select a board</option>
                        {% for board in user['boards'] %}
                            {% if board.name == upload_to %}
                                <option value="{{board.board_id}}" selected="selected">{{board.name}}</option>
                            {% else %}
                                <option value="{{board.board_id}}">{{board.name}}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <input class="form-control btn btn-primary" type="submit">
                </div>
                {% else %}
                <div class="form-group">
                    <p>Before you upload, please <a href="/board">add a board</a></p>
                </div>
                {% endif %}


            </form>

            {% else %}
            <p>Please <a href="/log_in">log in</a> to access this page.</p>
            {% endif %}
        </div>
    </div>
</div>

<script>
    // Get radio buttons and input fields
    const urlRadio = document.getElementById('flexRadioDefault1');
    const fileRadio = document.getElementById('flexRadioDefault2');
    const urlInput = document.getElementById('url-input');
    const fileInput = document.getElementById('file-input');

    // Set initial state
    urlInput.style.display = 'none';  // Hide URL input initially
    fileInput.style.display = 'block'; // Show file input initially

    // Add event listeners to radio buttons
    urlRadio.addEventListener('change', () => {
        urlInput.style.display = 'block';
        fileInput.style.display = 'none';
    });

    fileRadio.addEventListener('change', () => {
        urlInput.style.display = 'none';
        fileInput.style.display = 'block';
    });
</script>
{% endblock %}